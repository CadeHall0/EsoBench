<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esolang Learning Benchmark</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f8f9fa 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-bottom: 1px solid #e1e4e8;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            font-weight: 400;
        }

        nav {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .top-nav {
            background: white;
            border-bottom: 1px solid #e1e4e8;
            padding: 0;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .top-nav .nav-tabs {
            justify-content: flex-start;
            border-bottom: none;
            gap: 0;
            margin: 0;
            padding: 0 2rem;
        }

        .top-nav .nav-tab {
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            color: #586069;
            background: transparent;
            border-radius: 0;
            padding: 1rem 1.5rem;
            transition: all 0.2s;
            font-weight: 500;
            border-top: none;
            border-left: none;
            border-right: none;
        }

        .top-nav .nav-tab:hover {
            background: #f6f8fa;
            color: #24292e;
            border-bottom-color: #d1d9e0;
        }

        .top-nav .nav-tab.active {
            background: transparent;
            color: #0366d6;
            font-weight: 500;
            border-bottom-color: #0366d6;
            box-shadow: none;
        }

        .nav-tabs {
            display: flex;
            gap: 0;
            border-bottom: 1px solid #e1e4e8;
        }

        .nav-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-tab:hover {
            background-color: #f6f8fa;
        }

        .nav-tab.active {
            border-bottom-color: #0366d6;
            color: #0366d6;
            font-weight: 500;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tab-content.active {
            display: block;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
            vertical-align: middle;
            height: 77px; /* Ensure consistent row height */
        }

        .leaderboard-table th {
            background-color: #f6f8fa;
            font-weight: 600;
            position: sticky;
            top: 0;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s;
            z-index: 10; /* Ensure headers stay above content */
        }

        .leaderboard-table th:hover {
            background-color: #e1e4e8;
        }

        .leaderboard-table th.sortable::after {
            content: '';
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-left: 8px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Cpath d='M8 2L11 6H5L8 2Z' fill='%23666' stroke='%23666' stroke-width='0.5'/%3E%3Cpath d='M8 14L5 10H11L8 14Z' fill='%23666' stroke='%23666' stroke-width='0.5'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .leaderboard-table th.sortable:hover::after {
            opacity: 1;
        }

        .leaderboard-table th.sort-asc::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Cpath d='M8 2L11 6H5L8 2Z' fill='%230366d6' stroke='%230366d6' stroke-width='0.5'/%3E%3C/svg%3E");
            opacity: 1;
        }

        .leaderboard-table th.sort-desc::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Cpath d='M8 14L5 10H11L8 14Z' fill='%230366d6' stroke='%230366d6' stroke-width='0.5'/%3E%3C/svg%3E");
            opacity: 1;
        }

        .leaderboard-table tr {
            transition: background-color 0.2s;
        }

        .leaderboard-table tbody tr:hover {
            background-color: #f6f8fa;
        }

        .company-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            vertical-align: middle;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .model-cell {
            display: flex;
            align-items: center;
            box-sizing: border-box;
        }

        /* Ensure all table cells have consistent padding and sizing */
        .leaderboard-table td {
            position: relative;
        }

        /* Make the mini-heatmap cell match the model cell height */
        .mini-heatmap {
            display: grid;
            grid-template-columns: repeat(6, 8px);
            grid-template-rows: repeat(5, 8px);
            gap: 1px;
            padding: 4px;
            margin: auto; /* Center the heatmap vertically */
        }

        .icon-placeholder {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            flex-shrink: 0;
        }

        .mini-heatmap-cell {
            border-radius: 1px;
        }

        .mini-heatmap-cell[title]:hover::after {
            animation-delay: 0.2s;
        }

        .rank-cell {
            font-weight: 600;
            color: #0366d6;
        }

        .score-cell {
            font-weight: 500;
        }

        .task-scores {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            color: #666;
        }

        .expanded-row {
            background-color: #f8f9fa;
            border-top: 1px solid #e1e4e8;
        }

        .task-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 4px;
            padding: 1rem;
            max-width: 600px;
        }

        .task-header {
            font-weight: 600;
            text-align: center;
            padding: 0.5rem;
            background-color: #e1e4e8;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .score-cell-grid {
            text-align: center;
            padding: 0.5rem;
            border-radius: 4px;
            font-weight: 500;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .methodology h2 {
            margin-bottom: 1rem;
            color: #24292e;
        }

        .methodology h3 {
            margin: 1.5rem 0 0.75rem 0;
            color: #24292e;
        }

        .methodology p {
            margin-bottom: 1rem;
            color: #586069;
        }

        .methodology ul {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        .methodology li {
            margin-bottom: 0.5rem;
            color: #586069;
        }

        .citation-box {
            background-color: #f6f8fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
            white-space: pre-line;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .error {
            background-color: #ffeaea;
            border: 1px solid #d73a49;
            border-radius: 6px;
            padding: 1rem;
            color: #d73a49;
            margin: 1rem 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-card {
            background: #f6f8fa;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0366d6;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="top-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('leaderboard')">Leaderboard</button>
                <button class="nav-tab" onclick="showTab('methodology')">Methodology</button>
                <button class="nav-tab" onclick="showTab('citation')">Citation</button>
            </div>
        </nav>
    </div>



    <div class="container">

        <div id="leaderboard" class="tab-content active">
            <h2 style="margin-bottom: 2rem; color: #24292e; font-size: 2rem;">EsoLang Discovery Leaderboard</h2>
            
            <div id="loading" class="loading">Loading benchmark results...</div>
            <div id="error" class="error" style="display: none;"></div>
            
            <table id="leaderboard-table" class="leaderboard-table" style="display: none;">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Model</th>
                        <th>Company</th>
                        <th class="sortable" onclick="sortTable('score')">Score</th>
                        <th class="sortable" onclick="sortTable('error')">Error Rate (%)</th>
                        <th class="sortable" onclick="sortTable('solved')">Solved (%)</th>
                        <th>Performance</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <!-- Table content will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div id="methodology" class="tab-content methodology">
            <h2>Methodology</h2>
            
            <h3>Overview</h3>
            <p>This benchmark evaluates large language models' ability to learn and adapt in novel programming environments. Models are presented with a private esoteric programming language (esolang) and must solve computational tasks through iterative exploration and experimentation.</p>

            <h3>Benchmark Structure</h3>
            <p>The benchmark consists of 6 distinct programming tasks. For each task, models receive:</p>
            <ul>
                <li>One example program in the esolang demonstrating basic syntax</li>
                <li>A task description specifying the desired computational goal</li>
                <li>Access to an interpreter that executes their code and returns output</li>
            </ul>

            <h3>Evaluation Protocol</h3>
            <p>Models interact with the interpreter iteratively, submitting code and receiving feedback. Key parameters:</p>
            <ul>
                <li><strong>Turn limit:</strong> Maximum 50 interactions per task attempt</li>
                <li><strong>Attempts per task:</strong> 5 independent attempts</li>
                <li><strong>Total attempts per model:</strong> 30 (6 tasks × 5 attempts)</li>
            </ul>

            <h3>Scoring System</h3>
            <p>Task scores are calculated based on solution speed:</p>
            <ul>
                <li><strong>Turn 1 solution:</strong> 100 points</li>
                <li><strong>Turn 50 solution:</strong> 2 points</li>
                <li><strong>Linear interpolation:</strong> Points = 102 - (2 × turn_number)</li>
                <li><strong>No solution:</strong> 0 points</li>
            </ul>

            <h3>Metrics</h3>
            <ul>
                <li><strong>Clean Score:</strong> Average score across all 30 attempts</li>
                <li><strong>Error Rate:</strong> Percentage of attempts resulting in interpreter errors</li>
                <li><strong>Task Scores:</strong> Individual scores for each of the 5 attempts per task</li>
            </ul>

            <h3>Design Rationale</h3>
            <p>This benchmark tests models' capacity for:</p>
            <ul>
                <li>Rapid adaptation to unfamiliar syntax and semantics</li>
                <li>Systematic exploration of new programming constructs</li>
                <li>Learning from minimal examples and interpreter feedback</li>
                <li>Hypothesis formation and testing in novel domains</li>
            </ul>
        </div>

        <div id="citation" class="tab-content">
            <h2>Citation</h2>
            <p>If you use this benchmark in your research, please cite:</p>
            
            <div class="citation-box">@misc{esolang_discovery_benchmark_2025,
    title={EsoLang Discovery Leaderboard: A Benchmark for Evaluating 
           AI Model Adaptation in Novel Programming Environments},
    author={[Author Name]},
    year={2025},
    url={https://[username].github.io/esolang-benchmark},
    note={Benchmark measuring large language model performance on 
          esoteric programming language learning tasks}
}</div>

            <h3>BibTeX Entry</h3>
            <p>Copy the above BibTeX entry for use in your academic references.</p>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Load and display benchmark data
        let benchmarkData = {};
        let currentSort = { column: 'score', direction: 'desc' };

        // Company icon mapping
        const companyIcons = {
            'open-ai': 'https://cdn.jsdelivr.net/gh/simple-icons/simple-icons@v9/icons/openai.svg',
            'anthropic': 'https://cdn.brandfetch.io/idmJWF3N06/theme/dark/symbol.svg?c=1bxid64Mup7aczewSAYMX&t=1721803183716',
            'google': 'https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg',
            'xai': 'https://cdn.brandfetch.io/iddjpnb3_W/theme/dark/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1739946163827'
        };

        // Company name mapping
        const companyNames = {
            'open-ai': 'OpenAI',
            'anthropic': 'Anthropic',
            'google': 'Google',
            'xai': 'xAI'
        };

        function getCompanyIcon(provider) {
            if (!provider) return null;
            const providerKey = provider.toLowerCase().replace(/[^a-z0-9-]/g, '');
            return companyIcons[providerKey] || null;
        }

        function getCompanyName(provider) {
            if (!provider) return 'Unknown';
            const providerKey = provider.toLowerCase().replace(/[^a-z0-9-]/g, '');
            return companyNames[providerKey] || provider;
        }

        async function loadBenchmarkData() {
            try {
                const response = await fetch('All_Results.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                benchmarkData = await response.json();
                displayLeaderboard();
                document.getElementById('loading').style.display = 'none';
            } catch (error) {
                console.error('Error loading benchmark data:', error);
                document.getElementById('loading').style.display = 'none';
                const errorDiv = document.getElementById('error');
                errorDiv.textContent = `Error loading benchmark data: ${error.message}`;
                errorDiv.style.display = 'block';
            }
        }

        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'desc';
            }
            
            // Update header styling
            document.querySelectorAll('.leaderboard-table th').forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
            });
            
            const header = event.target;
            header.classList.add(currentSort.direction === 'asc' ? 'sort-asc' : 'sort-desc');
            
            displayLeaderboard();
        }

        function getSortedModels() {
            const models = Object.entries(benchmarkData);
            
            models.sort((a, b) => {
                let aVal, bVal;
                
                if (currentSort.column === 'score') {
                    aVal = a[1]['Clean Score'];
                    bVal = b[1]['Clean Score'];
                } else if (currentSort.column === 'error') {
                    aVal = a[1]['Error Percent'];
                    bVal = b[1]['Error Percent'];
                } else if (currentSort.column === 'solved') {
                    aVal = a[1]['Percent Solved'];
                    bVal = b[1]['Percent Solved'];
                }
                
                if (currentSort.direction === 'asc') {
                    return aVal - bVal;
                } else {
                    return bVal - aVal;
                }
            });
            
            return models;
        }

        function getRankWithTies(sortedModels, index) {
            if (index === 0) return 1;
            
            let currentValue, compareValue;
            if (currentSort.column === 'score') {
                currentValue = sortedModels[index][1]['Clean Score'];
            } else if (currentSort.column === 'error') {
                currentValue = sortedModels[index][1]['Error Percent'];
            } else if (currentSort.column === 'solved') {
                currentValue = sortedModels[index][1]['Percent Solved'];
            }
            
            let rank = 1;
            
            for (let i = 0; i < index; i++) {
                if (currentSort.column === 'score') {
                    compareValue = sortedModels[i][1]['Clean Score'];
                } else if (currentSort.column === 'error') {
                    compareValue = sortedModels[i][1]['Error Percent'];
                } else if (currentSort.column === 'solved') {
                    compareValue = sortedModels[i][1]['Percent Solved'];
                }
                
                if (compareValue !== currentValue) {
                    rank = i + 2;
                } else {
                    break;
                }
            }
            
            return rank;
        }

        function getScoreColor(score) {
            // Nice gradient: red (0) -> yellow (50) -> green (100)
            if (score <= 50) {
                // Red to yellow
                const ratio = score / 50;
                const red = Math.round(220 * (1 - ratio) + 255 * ratio);
                const green = Math.round(53 * (1 - ratio) + 235 * ratio);
                const blue = Math.round(47 * (1 - ratio) + 59 * ratio);
                return `rgb(${red}, ${green}, ${blue})`;
            } else {
                // Yellow to green
                const ratio = (score - 50) / 50;
                const red = Math.round(255 * (1 - ratio) + 34 * ratio);
                const green = Math.round(235 * (1 - ratio) + 197 * ratio);
                const blue = Math.round(59 * (1 - ratio) + 94 * ratio);
                return `rgb(${red}, ${green}, ${blue})`;
            }
        }

        function createMiniHeatmap(modelData) {
            const heatmap = document.createElement('div');
            heatmap.classList.add('mini-heatmap');
            
            for (let attempt = 0; attempt < 5; attempt++) {
                for (let task = 1; task <= 6; task++) {
                    const cell = document.createElement('div');
                    cell.classList.add('mini-heatmap-cell');
                    
                    const taskScores = modelData[`Task ${task}`] || [0, 0, 0, 0, 0];
                    const score = taskScores[attempt] || 0;
                    
                    cell.style.backgroundColor = getScoreColor(score);
                    cell.title = `Task ${task}, Attempt ${attempt + 1}: ${score}`;
                    
                    heatmap.appendChild(cell);
                }
            }
            
            return heatmap;
        }

        function displayLeaderboard() {
            const sortedModels = getSortedModels();
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            
            sortedModels.forEach(([modelName, modelData], index) => {
                const row = document.createElement('tr');
                
                const rank = getRankWithTies(sortedModels, index);
                const provider = modelData.provider || modelData.Provider || 'Unknown';
                const companyIcon = getCompanyIcon(provider);
                const companyName = getCompanyName(provider);
                
                // Create model cell with icon
                const modelCell = document.createElement('td');
                modelCell.classList.add('model-cell');
                
                if (companyIcon) {
                    const icon = document.createElement('img');
                    icon.src = companyIcon;
                    icon.alt = provider;
                    icon.classList.add('company-icon');
                    icon.onerror = () => {
                        // Replace with placeholder div to maintain alignment
                        const placeholder = document.createElement('div');
                        placeholder.classList.add('icon-placeholder');
                        icon.parentNode.replaceChild(placeholder, icon);
                    };
                    modelCell.appendChild(icon);
                } else {
                    // Add placeholder to maintain alignment
                    const placeholder = document.createElement('div');
                    placeholder.classList.add('icon-placeholder');
                    modelCell.appendChild(placeholder);
                }
                
                const modelName_ = document.createElement('strong');
                modelName_.textContent = modelName;
                modelCell.appendChild(modelName_);
                
                // Create mini heatmap for Performance column
                const heatmapCell = document.createElement('td');
                heatmapCell.appendChild(createMiniHeatmap(modelData));
                
                row.innerHTML = `
                    <td class="rank-cell">${rank}</td>
                `;
                row.appendChild(modelCell);
                row.innerHTML += `
                    <td>${companyName}</td>
                    <td class="score-cell">${modelData['Clean Score'].toFixed(1)}</td>
                    <td>${modelData['Error Percent'].toFixed(1)}%</td>
                    <td class="score-cell">${modelData['Percent Solved'].toFixed(1)}%</td>
                `;
                row.appendChild(heatmapCell);
                
                tbody.appendChild(row);
            });
            
            document.getElementById('leaderboard-table').style.display = 'table';
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadBenchmarkData);
    </script>
</body>
</html>
